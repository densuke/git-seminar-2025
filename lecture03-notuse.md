---
marp: true
theme: default
paginate: true
mermaid: true
---
<script type="module">
import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.esm.min.mjs';
mermaid.initialize({ startOnLoad: true });
</script>

# 3時間目: タイムトラベルと考古学 - 履歴の探検

## Gitの履歴を効果的にナビゲートする

---

## 学習目標

*   `git log`の様々なオプションを習得します。
*   プロジェクトの履歴を効果的にナビゲートします。
*   「ポーセリン」コマンドと「プラミング」コマンドを区別します。
*   プラミングコマンドでコミットオブジェクトを調査します。

---

## このセッションで学ぶこと

*   `git log`で人間が読みやすい履歴を見ます。
*   `git cat-file`で生のオブジェクトを解剖します。
*   この対比でGitの仕組みを深く理解します。
*   Gitの内部構造を根本から理解します。

---

## さらなる履歴の作成

*   まず、いくつかコミットを追加しましょう。
*   新しいファイルを追加したり、既存ファイルを変更したりします。
*   探検する履歴を作成します。

---

## ポーセリンビュー: `git log`

*   `git log`: デフォルトの詳細なビューです。
*   `git log --oneline`: コミットごとに1行で表示します。
*   `git log --stat`: 変更ファイルと行数を表示します。
*   `git log --patch` または `-p`: 各コミットの変更内容（diff）を表示します。

---

## 最強の組み合わせ

*   `git log --graph --decorate --oneline --all`
    *   `--graph`: コミット履歴をASCIIアートで描画します。
    *   `--decorate`: ブランチやタグのポインタを表示します。
    *   `--oneline`: コンパクトさを維持します。
    *   `--all`: 現在のブランチだけでなく、すべてのブランチを表示します。

---

## Gitの内部を覗くコマンド: 高レベルと低レベル

*   **高レベルコマンド**: ユーザーが普段使う、抽象的なコマンドです。例: `git status`
*   **低レベルコマンド**: Gitが内部で使う、より具体的なコマンドです。例: `git cat-file`
*   Gitの仕組みを深く理解するには、低レベルコマンドを使います。

---

## `git cat-file`コマンド

*   `git cat-file -t <hash>`: オブジェクトの種類を表示します。
    *   例: `commit`、`tree`、`blob`
*   `git cat-file -p <hash>`: オブジェクトの内容をきれいに表示します。

---

## `cat-file -p`の出力分析

*   `tree <hash>`: スナップショットのトップレベルのツリーオブジェクトです。
*   `parent <hash>`: 先行するコミットのハッシュです。
    *   これがDAGを形成するリンクです。
*   `author...`: コードを最初に書いた人です。
*   `committer...`: コードをコミットした人です。
*   コミットメッセージです。

---

## 演習: コミットの検死

*   **目的**: コミットオブジェクト内のデータを手動で読み取ります。
*   **手順**:
    1.  `git log`の出力からコミットハッシュを見つけます。
    2.  `git cat-file -t <hash>`でタイプを確認します。
    3.  `git cat-file -p <hash>`を実行します。
    4.  親コミットとツリーオブジェクトのハッシュを特定します。
    5.  書き留めて、オブジェクトの構造を解析します。
